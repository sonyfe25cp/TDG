<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.omartech.tdg.mapper.ProductMapper">
	<select id="getProductById" parameterType="int" resultType="Product">
		select * from product where id = #{id}
	</select>
	<select id="getProductListByPage" parameterType="Page" resultType="Product">
		select * from product order by id desc limit #{numBegin}, #{pageSize}
	</select>
	<select id="getProductListByPageAndSeller" resultType="Product">
		select * from product where sellerId = #{sellerId} order by id desc limit #{page.numBegin}, #{page.pageSize}
	</select>
	<select id="getProductListByPageAndStatus" resultType="Product">
		select * from product where status = #{status} order by id desc limit #{page.numBegin}, #{page.pageSize}
	</select>
	<select id="getProductsInCategoryByPage" resultType="Product">
		select * from product order where categoryId = #{categoryId} by id desc limit #{page.numBegin}, #{pageSize}
	</select>
	<insert id="insertProduct" parameterType="Product">
	    insert into product(
	    	name, description, retailPrice, promotionPrice, promotionTime, wholePrice,
	    	minimumQuantity, maximumAcceptQuantity, availableQuantity, safeStock, active, 
	    	status, internationalShippingService, internationalShippingFee, internationalPromiseDays,
	    	netWeight, grossWeight, sizeWithPackage, mainImage, subImages, brandId, hasChildren,
	    	sellerId, productTypeId, categoryId)
	    values(
	    	#{name},#{description},#{retailPrice},#{promotionPrice},#{promotionTime},#{wholePrice},
	    	#{minimumQuantity},#{maximumAcceptQuantity},#{availableQuantity},#{safeStock},#{active},
	    	#{status}, #{internationalShippingService}, #{internationalShippingFee}, #{internationalPromiseDays},
	    	#{netWeight},#{grossWeight},#{sizeWithPackage},#{mainImage},#{subImages},#{brandId}, #{hasChildren},
	    	#{sellerId},#{productTypeId}, #{categoryId}
	    )
	    <selectKey keyProperty="id" resultType="int">  
	        select @@identity as id
	    </selectKey>  
	</insert>
	<update id="updateProduct" parameterType="Product">
		update product set name=#{name}, description = #{description}, nameInChinese = #{nameInChinese}, descriptionInChinese = #{descriptionInChinese},
		status = #{status}, hasChildren = #{hasChildren}, 
		internationalShippingService = #{internationalShippingService}, internationalShippingFee = #{internationalShippingFee}, internationalPromiseDays = #{internationalPromiseDays},
		retailPrice = #{retailPrice}, promotionPrice = #{promotionPrice}, promotionTime = #{promotionTime}, wholePrice = #{wholePrice},
		minimumQuantity = #{minimumQuantity}, maximumAcceptQuantity = #{maximumAcceptQuantity}, coinage = #{coinage},
		availableQuantity = #{availableQuantity}, safeStock = #{safeStock}, active = #{active}, netWeight = #{netWeight}, grossWeight = #{grossWeight},
		sizeWithPackage = #{sizeWithPackage}, mainImage = #{mainImage}, subImages = #{subImages}, brandId = #{brandId}, sellerId = #{sellerId},
		productTypeId = #{productTypeId}, categoryId = #{categoryId} where id = #{id}
	</update>
	
	<delete id="deleteProduct" parameterType="int">
	    delete from product where id = #{id}
	</delete>
</mapper>